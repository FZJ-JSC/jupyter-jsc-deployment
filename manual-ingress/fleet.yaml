defaultNamespace: ingress-nginx
helm:
  values:
    image:
      tag: "1.23.1"
targetCustomizations:
  - name: staging
    clusterSelector:
      matchLabels:
        stage: staging
        provider.cattle.io: rke
    helm:
      releaseName: "manual-ingress-nginx-staging"
      values:
        enabled: true
        nameOverride: "manual-ingress-nginx-staging"
        service:
          loadBalancerIP: 134.94.199.199
  - name: production
    clusterSelector:
      matchLabels:
        stage: production
        provider.cattle.io: rke
    helm:
      releaseName: "manual-ingress-nginx-production"
      values:
        enabled: true
        nameOverride: "manual-ingress-nginx-production"
        replicaCount: 2
        service:
          loadBalancerIP: 134.94.199.54
        enabledServices:
          jhub: true
          nbviewer: true
          airflow: false
        jhubInstances:
          - name: "jupyterjsc-production"
            serverName: "jupyter-jsc.fz-juelich.de"
            tlsSecret: "jupyter-jsc-certs"
            host: "proxy-public.jupyterjsc.svc"
            scheme: "https"
            proxyReadTimeout: 86400s
            proxyConnectTimeout: 3600s
            proxySendTimeout: 3600s
            clientMaxBodySize: 2g
            maintenanceHost: "jhub-maintenance.jupyterjsc.svc"
            # if maintenance is set to true, remember to set maintenance/fleet.yaml:production.helm.values.enabled to true
            maintenance: false
            upstream:
              enabled: true
              tries: 5
              server:
              - proxy-public.jupyterjsc.svc:443
              - proxy-public-0.jupyterjsc.svc:443
              - proxy-public-1.jupyterjsc.svc:443
              - proxy-public-2.jupyterjsc.svc:443
              - proxy-public-3.jupyterjsc.svc:443
              - proxy-public-4.jupyterjsc.svc:443
            staticFiles:
              scheme: "http"
              host: "hub-static-files.jupyterjsc.svc"
              port: 8070
              redirects:
                - 2FA
                - 2fa
                - 2fadetails
                - jusufcloud
                - hdfaai
          - name: "juniq-production"
            serverName: "juniq.fz-juelich.de"
            tlsSecret: "juniq-certs"
            host: "juniq-proxy-public.jupyterjsc.svc"
            scheme: "https"
            proxyReadTimeout: 86400s
            proxyConnectTimeout: 3600s
            proxySendTimeout: 3600s
            clientMaxBodySize: 2g
            maintenanceHost: "jhub-maintenance.jupyterjsc.svc"
            # if maintenance is set to true, remember to set maintenance/fleet.yaml:production.helm.values.enabled to true
            maintenance: false
            upstream:
              enabled: true
              tries: 5
              server:
              - juniq-proxy-public.jupyterjsc.svc:443
              - juniq-proxy-public-0.jupyterjsc.svc:443
              - juniq-proxy-public-1.jupyterjsc.svc:443
              - juniq-proxy-public-2.jupyterjsc.svc:443
              - juniq-proxy-public-3.jupyterjsc.svc:443
              - juniq-proxy-public-4.jupyterjsc.svc:443
            staticFiles:
              scheme: "http"
              host: "juniq-static-files.jupyterjsc.svc"
              port: 8070
              redirects:
                - 2FA
                - 2fa
                - 2fadetails
                - jusufcloud
                - hdfaai
        nbviewerInstances:
          - name: "nbviewer-production"
            serverName: "docs.jupyter-jsc.fz-juelich.de"
            tlsSecret: "jupyter-jsc-certs"
            host: "nbviewer.jupyterjsc.svc"
            port: 8080
