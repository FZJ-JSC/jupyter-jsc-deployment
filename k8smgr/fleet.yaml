defaultNamespace: jupyterjsc
helm:
  values:
    image:
      tag: "1.0.4-4"
      # tag: "devel"
    nameOverride: "drf-k8smgr"
    nodeSelector:
      worker: "true"
    podAnnotations:
      proxy.istio.io/config: '{ "holdApplicationUntilProxyStarts": true }'
targetCustomizations:
  - name: staging
    clusterSelector:
      matchLabels:
        stage: staging
    helm:
      values:
        authorized_keys:
          - 'restrict,port-forwarding,command="/bin/echo No commands allowed" ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIHakYLgiGwEPU7iyxo3anl+IwS1JvVhkhK61jTkQaQPi'
          - 'restrict,command="/bin/bash ~ljupyter/manage_tunnel_test.sh -a $(/bin/echo $SSH_ORIGINAL_COMMAND | sha512sum | cut -d \" \" -f 1) < /dev/null > /dev/null 2>&1" ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIFEXIKTu6X7EjP7tq07wNb9S1P7Qwm2+E0I9kEtIgQyw'
        gitconfig:
          branch: "k8smgr-staging"
        extraVolumes:
          - name: persistent
            nfs:
              path: /mnt/storage/k8smgr
              server: 10.0.94.174
          - name: userhomes
            nfs:
              path: /mnt/userhomes
              server: 10.0.94.174
        extraVolumeMounts:
          - name: persistent
            mountPath: /mnt/persistent
          - name: userhomes
            mountPath: /mnt/userhomes

